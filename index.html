<!DOCTYPE html>
<html>

    <head lang="en">

        <meta charset="utf-8">
        <title>Guess</title>
        <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
        <link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css" rel="stylesheet" integrity="sha256-7s5uDGW3AHqw6xtJmNNtr+OBRJUlgkNJEo78P4b0yRw= sha512-nNo+yCHEyn0smMxSswnf/OnX6/KwJuZTlNZBjauKhTK0c+zT+q5JOCx0UFhXQ6rJR9jg6Es8gPuD2uZcYDLqSw==" crossorigin="anonymous">
        <link href="style.css" rel="stylesheet" type="text/css" />
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.2.0/jquery.min.js"></script>
        <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/js/bootstrap.min.js"></script>

        <!--  Begin guessing game script  -->
        <script>

            //  Declare and initialize target number
            var the_number = null;

            //  Declare and define initial lower and upper limits for guessing game
            var lower_limit, upper_limit;

            //  Begin pick_number() function definition
            function pick_number() {

                //  If limit fields are set, set new limits
                var limits = [parseInt($('#set_lower_input').val()), parseInt($('#set_upper_input').val())];
                //console.log("limits : ", limits)
                if (!(isNaN(limits[0]))) {
                    lower_limit = limits[0];
                }
                if (!(isNaN(limits[1]))) {
                    upper_limit = limits[1];
                }
                //  Reset the instructions
                $('#instructions').text('The current range is from ' + lower_limit + ' to ' + upper_limit);
                $('#response_div').text('Click the "Guess!" button above');

                //  Disable reset button, enable submit button
                $('#submit_button').prop("disabled", false);
                $('#reset_button').prop("disabled", true);

                //  Generate a random integer from lower_limit to upper_limit
                var random_number = Math.floor((upper_limit - lower_limit + 1)*Math.random() + lower_limit,1);
                //console.log("random_number : " + random_number);
                return random_number;
            }
            //  Close pick_number() function definition

            //  Begin make_guess() function definition
            function make_guess() {

                //  Parse a float number out of the guessed input
                var the_guess = parseFloat($('#guess_input').val());
                //console.log('the_guess (parsed) : ',the_guess);

                //  Disable reset button
                $('#reset_button').prop("disabled", false);

                //  Save the response div selector and clear the text
                var response = $('#response_div');
                response.text("");

                //  Begin the_guess to the_number comparisons
                //console.log('isNaN(the_guess) : ', isNaN(the_guess));
                if (isNaN(the_guess)) {  //  Test for non-numbers
                    response.text(response.text() + "What the? This is not a number? I can't even...? ");
                } else {

                    //  Save the difference between the_guess and the_number
                    var difference = the_guess - the_number;
                    //console.log('difference : ', difference);

                    //console.log("difference == 0 : ", difference == 0);
                    if (difference == 0) {  //  Check to see if the guess is correct

                        response.text(response.text() + "You guessed right! Congratulations!");
                        $('#submit_button').prop("disabled", true);  //  Disable the submit button

                    } else {  //  If the guess is wrong...
                        //console.log('the_guess % 1 != 0 : ', the_guess % 1 != 0);
                        if (the_guess % 1 != 0) {  //  Check if the guess is actually an integer

                            response.text(response.text() + "Integer. Pick an integer. You do know what that is, don't you? ");
                        }
                        //console.log('the_guess < lower_limit || the_guess > upper_limit : ', the_guess < lower_limit || the_guess > upper_limit);
                        if (the_guess < lower_limit || the_guess > upper_limit) {  //  Check if the guess is in range
                            response.text(response.text() + "In case you forgot how numbers work, " + the_guess + " is not between " + lower_limit + " and " + upper_limit + ". If you haven't noticed...");
                        }
                        //console.log('difference < 0 : ', difference < 0);
                        //console.log('difference > 0 : ', difference > 0);
                        if (difference < 0) {  //  Check if the guess was too low
                            response.text(response.text() + "You guessed too low.  Try again!");
                        } else if (difference > 0) {  //  Check if the guess was too high
                            response.text(response.text() + "You guessed too high.  Try again!");
                        } else {  //  Catch-all in case I did this wrong
                            response.text(response.text() + "Well I don't know what happened...maybe the fish fell off the treadmill again?");
                        }

                    }
                }
                //  Close the_guess to the_number comparisons
            }
            //  Close make_guess() function definition

            //  Begin jQuery event handlers on document ready
            $(document).ready(function(){
                //  Call make_guess() on submit
                $('#submit_button').click(function(){
                    make_guess();
                });
                //  Call pick_number() on submit
                $('#reset_button').click(function(){
                    the_number = pick_number();
                });
                //  Enable reset button on changes
                $('#set_lower_input,#set_upper_input').change(function(){
                    $('#reset_button').prop("disabled", false);
                });
            });
            //  Close jQuery event handlers on document ready

        </script>
        <!--  Close guessing game script  -->

    </head>

    <body onload="the_number = pick_number();">
        <h1>Guess!</h1>
        <p>The object of this game is to guess a randomly generated integer, using the form below. The number will not change between guesses. Good luck!</p>
        <fieldset>
            <legend>Settings</legend>
            <label>Lower Limit : <input type="text" id="set_lower_input" value="1" /></label>
            <label>Upper Limit : <input type="text" id="set_upper_input" value="10" /></label>
            <button type="button" id="reset_button">Reset game</button>
        </fieldset>
        <fieldset>
            <legend id="instructions">The current range is undetermined</legend>
            <label>Guess a number : <input type="text" id="guess_input" /></label>
            <button type="button" id="submit_button">Guess!</button>
        </fieldset>
        <fieldset>
            <legend>Results:</legend>
            <div id="response_div">Click the "Guess!" button above</div>
        </fieldset>

    </body>

</html>